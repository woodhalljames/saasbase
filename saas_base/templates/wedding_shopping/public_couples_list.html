<!-- saas_base/templates/wedding_shopping/public_couples_list.html -->
{% extends "base.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container py-5">
  <!-- Header -->
  <div class="row mb-5">
    <div class="col-12 text-center">
      <h1 class="display-4">üíç Wedding Celebrations</h1>
      <p class="lead text-muted">Discover beautiful wedding stories and registries from our community</p>
    </div>
  </div>

  {% if couples %}
    <!-- Couples Grid -->
    <div class="row">
      {% for couple in couples %}
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="card h-100 border-0 shadow-sm wedding-card">
            <div class="position-relative">
              {% if couple.couple_photo %}
                <img src="{{ couple.couple_photo.url }}" 
                     class="card-img-top" 
                     style="height: 250px; object-fit: cover;"
                     alt="{{ couple.couple_names }}">
              {% else %}
                <div class="card-img-top bg-gradient d-flex align-items-center justify-content-center" 
                     style="height: 250px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                  <i class="bi bi-heart text-white" style="font-size: 3rem;"></i>
                </div>
              {% endif %}
              
              <!-- Wedding date overlay -->
              {% if couple.wedding_date %}
                <div class="position-absolute top-0 end-0 m-3">
                  <span class="badge bg-white text-dark fs-6">
                    {{ couple.wedding_date|date:"M Y" }}
                  </span>
                </div>
              {% endif %}
            </div>
            
            <div class="card-body">
              <h5 class="card-title text-center">{{ couple.couple_names }}</h5>
              
              {% if couple.venue_name or couple.venue_location %}
                <p class="text-center text-muted mb-3">
                  {% if couple.venue_name %}
                    <i class="bi bi-geo-alt"></i> {{ couple.venue_name }}
                    {% if couple.venue_location %}<br>{{ couple.venue_location }}{% endif %}
                  {% elif couple.venue_location %}
                    <i class="bi bi-geo-alt"></i> {{ couple.venue_location }}
                  {% endif %}
                </p>
              {% endif %}
              
              {% if couple.couple_story %}
                <p class="card-text text-muted">
                  {{ couple.couple_story|truncatewords:15 }}
                </p>
              {% endif %}
              
              <!-- Stats -->
              <div class="row text-center small text-muted mb-3">
                <div class="col-6">
                  <div>{{ couple.registry_links.count }}</div>
                  <div>Registries</div>
                </div>
                <div class="col-6">
                  <div>{{ couple.social_links.count }}</div>
                  <div>Social Links</div>
                </div>
              </div>
            </div>
            
            <div class="card-footer bg-transparent border-0 text-center">
              <a href="{% url 'wedding_shopping:wedding_page' slug=couple.slug %}" 
                 class="btn btn-primary">
                <i class="bi bi-heart"></i> Visit Wedding Page
              </a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
    
    <!-- Call to Action -->
    <div class="row mt-5">
      <div class="col-lg-8 mx-auto">
        <div class="card bg-light border-0">
          <div class="card-body text-center py-5">
            <i class="bi bi-plus-circle text-primary mb-3" style="font-size: 3rem;"></i>
            <h3>Create Your Own Wedding Page</h3>
            <p class="lead text-muted mb-4">
              Share your love story, wedding details, and registries with family and friends.
            </p>
            {% if user.is_authenticated %}
              <a href="{% url 'wedding_shopping:dashboard' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-heart-fill"></i> Create My Wedding Page
              </a>
            {% else %}
              <a href="{% url 'account_signup' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-heart-fill"></i> Get Started
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    
  {% else %}
    <!-- Empty State -->
    <div class="row">
      <div class="col-lg-6 mx-auto">
        <div class="text-center py-5">
          <i class="bi bi-heart text-muted" style="font-size: 5rem;"></i>
          <h3 class="mt-4 text-muted">No couples yet!</h3>
          <p class="text-muted mb-4">
            Want to be the first couple to create a beautiful wedding page?
          </p>
          {% if user.is_authenticated %}
            <div class="d-grid gap-3 col-8 mx-auto">
              <a href="{% url 'wedding_shopping:dashboard' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-plus-circle"></i> Create My Wedding Page
              </a>
              <a href="#" class="btn btn-outline-secondary">
                Learn More & Pricing
              </a>
            </div>
          {% else %}
            <div class="d-grid gap-3 col-8 mx-auto">
              <a href="{% url 'account_signup' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-plus-circle"></i> Get Started
              </a>
              <a href="#" class="btn btn-outline-secondary">
                Learn More & Pricing
              </a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  {% endif %}
</div>

<style>
.wedding-card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.wedding-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
}

.bg-gradient {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
}

/* Heart animation for empty state */
@keyframes heartbeat {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.bi-heart {
  animation: heartbeat 2s infinite;
}
</style>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
{% endblock %}